<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<title>💀 Kertolaskupeli (2 lukua 😈) 💀</title>
<style>
  /* ===== BODY STYLE ===== */
  body {
    font-family: Arial, sans-serif;
    background-color: black;
    color: red;
    text-align: center;
    padding: 20px;
  }

  h1 {
    font-size: 2em;
    margin-bottom: 15px;
    text-shadow: 2px 2px 6px darkred;
  }

  #score {
    font-size: 1.3em;
    margin: 20px 0;
  }

  #history {
    max-width: 600px;
    margin: 0 auto;
    text-align: left;
    font-size: 1.2em;
    white-space: pre-wrap;
  }

  input[type=number] {
    font-size: 1.2em;
    width: 100px;
    text-align: center;
  }

  button {
    font-size: 1.1em;
    margin-left: 10px;
    padding: 5px 10px;
    border-radius: 5px;
    border: none;
    background-color: darkred;
    color: red;
    font-weight: bold;
    cursor: pointer;
  }

  button:disabled {
    background-color: #440000;
    color: #880000;
    cursor: not-allowed;
  }

</style>
</head>
<body>

<h1>💀 Kertolaskupeli (2 lukua 😈) 💀</h1>
<div id="score">Pisteet: 0 / 100</div>

<div>
  <span id="question"></span>
  <input type="number" id="answer">
  <button onclick="checkAnswer()">Tarkista</button>
</div>

<button onclick="newGame()">Aloita alusta</button>

<div id="history"></div>

<!-- ===== AUDIO ===== -->
<audio id="evilLaugh" src="evil-laugh.mp3" preload="auto"></audio>
<audio id="sadViolin" src="sad-hamster-violin-meme.mp3" preload="auto"></audio>

<script>
  // ===== GLOBAL VARIABLES =====
  let score = 0;
  let questionCount = 0;
  let currentA = 0;
  let currentB = 0;

  // ===== GENERATE A NEW QUESTION =====
  function newQuestion() {
    currentA = Math.floor(Math.random() * 10) + 1;
    currentB = Math.floor(Math.random() * 10) + 1;

    document.getElementById("question").textContent = `${currentA} · ${currentB} = `;
    document.getElementById("answer").value = "";
    document.getElementById("answer").focus();
  }

  // ===== UPDATE SCORE DISPLAY =====
  function updateScore() {
    document.getElementById("score").textContent = `Pisteet: ${score} / 100`;
  }

  // ===== PLAY SOUND =====
  function playSound(soundId) {
    const sound = document.getElementById(soundId);
    sound.currentTime = 0;
    sound.play();
  }

  // ===== APPEND HISTORY =====
  function appendHistory(text) {
    const history = document.getElementById("history");
    history.innerHTML += text + "\n";
  }

  // ===== CHECK ANSWER =====
  function checkAnswer() {
    const input = document.getElementById("answer");
    const ans = parseInt(input.value);
    if (isNaN(ans)) return;

    questionCount++;
    const correct = currentA * currentB;

    if (ans === correct) {
      // Correct answer
      score -= 5; // evil twist: correct lowers points
      playSound("evilLaugh");
      appendHistory(`${questionCount}. ${currentA} · ${currentB} = ${ans} ✅ Oikein! …mut pisteet laskevat 😈`);
    } else {
      // Wrong answer
      score -= 10;
      playSound("sadViolin");
      appendHistory(`${questionCount}. ${currentA} · ${currentB} = ${ans} ❌ Väärin!`);
    }

    updateScore();
    newQuestion();
  }

  // ===== START NEW GAME =====
  function newGame() {
    score = 0;
    questionCount = 0;
    document.getElementById("history").textContent = "";
    updateScore();
    newQuestion();
  }

  // ===== ENTER KEY SUPPORT =====
  document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("answer");
    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        checkAnswer();
      }
    });
    newGame();
  });
</script>

</body>
</html>
