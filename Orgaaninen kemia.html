<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Orgaanisen kemian harjoitus</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 30px;
      max-width: 800px;
      margin: auto;
    }
    h2 {
      text-align: center;
    }
    textarea {
      width: 100%;
      height: 100px;
      font-size: 16px;
      padding: 10px;
      margin-top: 10px;
      box-sizing: border-box;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
    }
    .locked-answer, .model-answer {
      margin-top: 20px;
      padding: 10px;
      background-color: #f4f4f4;
      border-left: 4px solid #999;
    }
    .model-answer {
      color: red;
      border-left: 4px solid red;
    }
    .score-section {
      margin-top: 20px;
    }
    select {
      font-size: 16px;
      padding: 5px;
      margin-left: 10px;
    }
    .hidden {
      display: none;
    }
    .final-score {
      font-size: 22px;
      color: green;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>Orgaanisen kemian harjoitus</h2>

  <div id="questionArea">
    <strong>Kysymys:</strong>
    <p id="questionText"></p>

    <textarea id="userAnswer" placeholder="Kirjoita vastauksesi tähän..."></textarea><br>
    <button onclick="checkAnswer()">Tarkista</button>
  </div>

  <div id="resultArea" class="hidden">
    <div class="locked-answer">
      <strong>Oma vastauksesi:</strong>
      <p id="userText"></p>
    </div>

    <div class="model-answer">
      <strong>Mallivastaus:</strong>
      <p id="modelText"></p>
    </div>

    <div class="score-section">
      <label for="score">Anna itsellesi pisteet (0–2):</label>
      <select id="score" onchange="showNextButton()">
        <option value="">Valitse</option>
        <option value="0">0</option>
        <option value="0.5">0.5</option>
        <option value="1">1</option>
        <option value="1.5">1.5</option>
        <option value="2">2</option>
      </select>
    </div>

    <button id="nextButton" class="hidden" onclick="nextQuestion()">Seuraava kysymys</button>
  </div>

  <div id="endScreen" class="hidden">
    <h3>Harjoitus päättyi!</h3>
    <p class="final-score" id="finalScore"></p>
    <button onclick="startGame()">Pelaa uudestaan</button>
  </div>

  <script>
    const questions = [
      {
        question: "Mitä on orgaaninen kemia?",
        answer: "Orgaaninen kemia on elollisen luonnon kemiaa ja erilaisten hiiliyhdisteiden kemiaa."
      },
      {
        question: "Luettele neljä hiilen alkuainemuotoa ja kerro missä niitä käytetään?",
        answer: "Timantti (korukivet, poranterät ja erilaiset leikkurit), grafeeni ja grafiitti (kynät, voiteluaineet), fullereeni ja nanoputki (nanotekniikka)."
      },
      {
        question: "Mitä ovat hiilivedyt?",
        answer: "Hiilivedyt ovat yhdisteitä, jotka sisältävät vain hiiltä ja vetyä."
      },
      {
        question: "Mitä ovat alkaanit?",
        answer: "Alkaanit ovat hiilivetyjä, joissa hiilten välillä on vain yksinkertaisia sidoksia."
      },
      {
        question: "Mitä ovat alkeenit?",
        answer: "Alkeenit ovat hiilivetyjä, joissa on vähintään yksi kaksoissidos hiiliatomien välillä."
      },
      {
        question: "Mitä ovat alkyynit?",
        answer: "Alkyynit ovat hiilivetyjä, joissa on vähintään yksi kolmoissidos hiiliatomien välillä."
      },
      {
        question: "Mitä eroa on tyydyttyneillä ja tyydyttymättömillä hiilivedyillä?",
        answer: "Tyydyttyneet hiilivedyt (alkaanit) sisältävät vain yksinkertaisia sidoksia, tyydyttymättömät (alkeenit, alkyynit) sisältävät kaksois- tai kolmoissidoksia."
      },
      {
        question: "Miten rakennekaava ja molekyylikaava eroavat toisistaan?",
        answer: "Rakennekaava näyttää, miten atomit ovat sitoutuneet toisiinsa, kun taas molekyylikaava näyttää vain atomien lukumäärät."
      },
      {
        question: "Selitä mitä tarkoittaa isomeria ja anna esimerkki kahdesta hiilivedystä, jotka ovat toistensa isomeereja?",
        answer: "Isomeria tarkoittaa, että yhdisteillä on sama molekyylikaava mutta eri rakennekaava. Esim. 1-buteeni ja 2-buteeni."
      },
      {
        question: "Millä tavalla hiili sitoutuu vetyatomeihin ja toisiin hiiliatomeihin hiilivedyissä?",
        answer: "Hiili muodostaa neljä kovalenttista sidosta ja voi sitoutua vetyihin ja toisiin hiiliatomeihin yksin-, kaksin- tai kolmoissidoksin."
      }
    ];

    let currentIndex = 0;
    let usedIndexes = [];
    let scoreList = [];

    function getRandomQuestion() {
      if (usedIndexes.length === questions.length) return null;

      let index;
      do {
        index = Math.floor(Math.random() * questions.length);
      } while (usedIndexes.includes(index));

      usedIndexes.push(index);
      return questions[index];
    }

    function startGame() {
      usedIndexes = [];
      scoreList = [];
      document.getElementById("endScreen").classList.add("hidden");
      document.getElementById("questionArea").style.display = "block";
      document.getElementById("resultArea").classList.add("hidden");
      nextQuestion();
    }

    function nextQuestion() {
  const q = getRandomQuestion();
  if (!q) {
    showFinalScore();
    return;
  }

  const questionNumber = scoreList.length + 1;
  document.getElementById("questionText").textContent = `${questionNumber}) ${q.question}`;
  document.getElementById("userAnswer").value = "";
  document.getElementById("userAnswer").disabled = false;
  document.getElementById("resultArea").classList.add("hidden");
  document.getElementById("questionArea").style.display = "block";
  document.getElementById("nextButton").classList.add("hidden");
  document.getElementById("score").value = "";

  currentIndex = questions.indexOf(q);
}


    function checkAnswer() {
      const answer = document.getElementById("userAnswer").value.trim();
      if (answer === "") {
        alert("Kirjoita ensin vastaus ennen tarkistamista.");
        return;
      }

      document.getElementById("userText").innerText = answer;
      document.getElementById("modelText").innerText = questions[currentIndex].answer;

      document.getElementById("resultArea").classList.remove("hidden");
      document.getElementById("questionArea").style.display = "none";
    }

    function showNextButton() {
      const scoreValue = document.getElementById("score").value;
      if (scoreValue !== "") {
        scoreList.push(parseFloat(scoreValue));
        document.getElementById("nextButton").classList.remove("hidden");
      }
    }

    function showFinalScore() {
      const total = scoreList.reduce((sum, val) => sum + val, 0);
      document.getElementById("finalScore").textContent = `Sait yhteensä ${total} / 20 pistettä.`;
      document.getElementById("endScreen").classList.remove("hidden");
      document.getElementById("resultArea").classList.add("hidden");
      document.getElementById("questionArea").style.display = "none";
    }

    window.onload = startGame;
  </script>

</body>
</html>
