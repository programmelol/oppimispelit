<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>K√§sitepeli</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 30px;
    }

    h2 {
      margin-bottom: 20px;
    }

    #center-box {
      padding: 20px;
      border: 2px solid #333;
      display: inline-block;
      margin-bottom: 40px;
      font-size: 20px;
      max-width: 400px;
      background-color: #f8f8f8;
    }

    .option {
      width: 250px;
      height: auto;
      padding: 15px;
      margin: 10px;
      font-size: 16px;
      cursor: pointer;
      border: 2px solid #333;
      background-color: white;
      transition: 0.2s;
    }

    .option:hover {
      background-color: #def;
    }

    #options-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    #feedback {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    #scoreboard {
      margin-top: 20px;
      font-size: 18px;
    }

    #restartBtn {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h2>Yhdist√§ oikea k√§site ja selitys</h2>

  <div id="center-box">Ladataan kysymyst√§...</div>

  <div id="options-container"></div>

  <div id="feedback"></div>
  <div id="scoreboard">Pisteet: 0 / 20</div>
  <button id="restartBtn" onclick="restartGame()">Pelaa uudestaan</button>

  <script>
    const data = [
      { term: "Isomeria", explanation: "Sama molekyylikaava, mutta erilainen rakennekaava" },
      { term: "Denaturointi", explanation: "Alkoholista tehd√§√§n juomiskelvotonta" },
      { term: "Alkaani", explanation: "Hiilivedyt, joissa vain yksinkertaisia sidoksia hiilten v√§lill√§" },
      { term: "Alkeeni", explanation: "Hiilivedyt, joissa hiiliketjussa on yksi kaksoissidos" },
      { term: "Alkyyni", explanation: "Hiilivedyt, joissa hiiliketjussa on yksi kolmoissidos" },
      { term: "Tyydyttynyt hiilivety", explanation: "Alkaanit eli ei kaksois- tai kolmoissidoksia" },
      { term: "Tyydyttym√§t√∂n hiilivety", explanation: "Hiiliketjussa on kaksois- tai kolmoissidos" },
      { term: "Hydroksyyliryhm√§", explanation: "Alkoholin tunnusomainen ryhm√§ (-OH)" },
      { term: "Karboksyyliryhm√§", explanation: "Karboksyylihapon tunnusomainen ryhm√§ (-COOH)" },
      { term: "Moniarvoinen alkoholi", explanation: "Alkoholissa on enemm√§n kuin yksi hydroksyyliryhm√§" },
      { term: "Moniarvoinen karboksyylihappo", explanation: "Karboksyylihapossa enemm√§n kuin yksi karboksyyliryhm√§" },
      { term: "Orgaaninen kemia", explanation: "Hiilen kemiaa tai elollisen luonnon kemiaa" },
    ];

    let currentCorrect = '';
    let score = 0;
    let questionsAnswered = 0;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function generateQuestion() {
      if (questionsAnswered >= 20) {
        document.getElementById("feedback").textContent = `üéâ Peli p√§√§ttyi! Lopullinen pistem√§√§r√§: ${score} / 20`;
        document.getElementById("restartBtn").style.display = "inline-block";
        return;
      }

      document.getElementById("feedback").textContent = "";

      const isTermInCenter = Math.random() < 0.5;
      const correctItem = data[Math.floor(Math.random() * data.length)];
      const options = new Set();
      options.add(isTermInCenter ? correctItem.explanation : correctItem.term);
      currentCorrect = isTermInCenter ? correctItem.explanation : correctItem.term;

      while (options.size < 4) {
        const random = data[Math.floor(Math.random() * data.length)];
        const choice = isTermInCenter ? random.explanation : random.term;
        options.add(choice);
      }

      const optionsArray = shuffle(Array.from(options));
      const optionsHTML = optionsArray.map(opt => `<button class="option" onclick="checkAnswer('${opt.replace(/'/g, "\\'")}')">${opt}</button>`).join("");

      document.getElementById("options-container").innerHTML = optionsHTML;
      document.getElementById("center-box").textContent = isTermInCenter ? correctItem.term : correctItem.explanation;
    }

    function checkAnswer(selected) {
      const feedback = document.getElementById("feedback");

      if (selected === currentCorrect) {
        score++;
        feedback.textContent = "‚úÖ Oikein!";
        feedback.style.color = "green";
      } else {
        feedback.textContent = `‚ùå V√§√§rin! Oikea vastaus oli: ${currentCorrect}`;
        feedback.style.color = "red";
      }

      questionsAnswered++;
      document.getElementById("scoreboard").textContent = `Pisteet: ${score} / 20`;

      setTimeout(() => {
        generateQuestion();
      }, 2000);
    }

    function restartGame() {
      score = 0;
      questionsAnswered = 0;
      document.getElementById("restartBtn").style.display = "none";
      document.getElementById("scoreboard").textContent = `Pisteet: 0 / 20`;
      generateQuestion();
    }

    window.onload = generateQuestion;
  </script>
</body>
</html>
